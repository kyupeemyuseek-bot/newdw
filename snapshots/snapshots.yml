version: 2

snapshots:
  - name: dim_account_status_snapshot
    description: "{{ doc('dim_account_status_snapshot') }}"
    config:
      target_schema: snapshots
      strategy: timestamp
      unique_key: status_code
      updated_at: created_date

    columns:
      - name: status_code
        description: "Business code for the account status (natural key)"
        tests:
          - not_null
          - unique

      - name: status_description
        description: "Textual description of the account status"

      - name: created_date
        description: "Date when the status was created"
  
  - name: dim_financingtype_snapshot
    description: "{{ doc('dim_financingtype_snapshot') }}"
    columns:
      - name: financing_type_code
        description: "Unique business code for financing type."
      - name: financing_type_description
        description: "Business description of the financing type."
      - name: record_date
        description: "Original record date from the source system."
      - name: dbt_valid_from
        description: "Start timestamp when this version of the record became valid."
      - name: dbt_valid_to
        description: "End timestamp when this version of the record was superseded."

  - name: dim_branch_snapshot
    description: "{{ doc('dim_branch_snapshot') }}"
    columns:
      - name: BRANCHID
        description: "Unique identifier for each branch."
        tests:
          - not_null
          - unique

      - name: CITY
        description: "City where the branch is located."
      - name: CLUSTER
        description: "Cluster or grouping of the branch."
      - name: DESCRIPTION
        description: "Branch description."
      - name: PROVINCE
        description: "Province where the branch is located."
      - name: ZIPCODE
        description: "Zipcode of the branch location."

      - name: dbt_valid_from
        description: "Timestamp when this snapshot version became valid."
      - name: dbt_valid_to
        description: "Timestamp when this snapshot version was replaced (null if current)."
      - name: dbt_scd_id
        description: "Surrogate key generated by dbt for tracking snapshot versions."

  - name: dim_lotinventory_snapshot
    description: "{{ doc('dim_lotinventory_snapshot') }}"
    columns:
      - name: UNIT_CODE
        description: "Unique identifier for the unit."
        tests:
          - not_null
          - unique

      - name: BRANCH_ID
        description: "Branch associated with the unit."
      - name: UNIT_TYPE
        description: "Type of unit."
      - name: UNIT_CLASS
        description: "Classification of the unit."
      - name: PHASE
        description: "Phase of the project where the unit belongs."
      - name: SECTION
        description: "Section of the project."
      - name: BLOCK
        description: "Block number of the unit."
      - name: LOT
        description: "Lot number of the unit."
      - name: UNIT_COST
        description: "Cost of the unit."
      - name: RECORDED_BY
        description: "User or system who recorded the entry."
      - name: RECORD_DATE
        description: "Date the record was captured."

      - name: dbt_valid_from
        description: "Timestamp when this snapshot version became valid."
      - name: dbt_valid_to
        description: "Timestamp when this snapshot version was replaced (null if current)."
      - name: dbt_scd_id
        description: "Surrogate key generated by dbt for tracking snapshot versions."

  - name: dim_source_of_sale_snapshot
    description: "{{ doc('dim_source_of_sale_snapshot') }}"
    columns:
      - name: SOURCE_CODE
        description: "Unique identifier for the source of sale."
        tests:
          - not_null
          - unique

      - name: SOURCE_DESCRIPTION
        description: "Description of the source of sale."
      - name: RECORD_DATE
        description: "Date the record was captured."

      - name: dbt_valid_from
        description: "Timestamp when this snapshot version became valid."
      - name: dbt_valid_to
        description: "Timestamp when this snapshot version was replaced (null if current)."
      - name: dbt_scd_id
        description: "Surrogate key generated by dbt for tracking snapshot versions."

  - name: dim_unitclass_snapshot
    description: "{{ doc('dim_unitclass_snapshot') }}"
    columns:
      - name: UNITCLASS
        description: "Unique identifier for the unit class."
        tests:
          - not_null
          - unique

      - name: DESCRIPTION
        description: "Description of the unit class."
      - name: RECDATE
        description: "Date the record was captured."

      - name: dbt_valid_from
        description: "Timestamp when this snapshot version became valid."
      - name: dbt_valid_to
        description: "Timestamp when this snapshot version was replaced (null if current)."
      - name: dbt_scd_id
        description: "Surrogate key generated by dbt for tracking snapshot versions."

  - name: dim_unittype_snapshot
    description: "{{ doc('dim_unittype_snapshot') }}"
    columns:
      - name: UNITTYPE
        description: "Unique identifier for the unit type."
        tests:
          - not_null
          - unique

      - name: DESCRIPTION
        description: "Description of the unit type."
      - name: RECDATE
        description: "Date the record was captured."

      - name: dbt_valid_from
        description: "Timestamp when this snapshot version became valid."
      - name: dbt_valid_to
        description: "Timestamp when this snapshot version was replaced (null if current)."
      - name: dbt_scd_id
        description: "Surrogate key generated by dbt for tracking snapshot versions."

  